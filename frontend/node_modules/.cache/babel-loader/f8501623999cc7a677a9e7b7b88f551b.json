{"ast":null,"code":"import _objectSpread from\"/Users/lax001/My Documents/Web Dev - Hyperion/Paired project/notes_app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/lax001/My Documents/Web Dev - Hyperion/Paired project/notes_app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lax001/My Documents/Web Dev - Hyperion/Paired project/notes_app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/lax001/My Documents/Web Dev - Hyperion/Paired project/notes_app/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{ReactComponent as ArrowLeft}from\"../assets/chevron-back-outline.svg\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var noteId=useParams().id;var _useState=useState([null]),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var history=useNavigate();useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId===\"new\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});history(\"/\");case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!==\"new\"&&note.body===\"\"){deleteNote();}else if(noteId!==\"new\"){updateNote();}else if(noteId===\"new\"&&note.body!==null){createNote();}history(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!==\"new\"?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{body:e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;// could use {match} in react router v4 and v5\n//  import React from 'react';\n//  const NotePage = ({match}) => {\n//  let noteId = match.params.id\n//    return <div> Single Page {noteId}</div>;\n//  };\n//  export default NotePage;","map":{"version":3,"sources":["/Users/lax001/My Documents/Web Dev - Hyperion/Paired project/notes_app/frontend/src/pages/NotePage.js"],"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","Link","NotePage","noteId","id","note","setNote","history","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","handleSubmit","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as ArrowLeft } from \"../assets/chevron-back-outline.svg\";\nimport { Link } from \"react-router-dom\";\n\nconst NotePage = () => {\n  let noteId = useParams().id;\n  let [note, setNote] = useState([null]);\n  let history = useNavigate();\n\n  useEffect(() => {\n    getNote();\n  }, [noteId]);\n\n  let getNote = async () => {\n    if (noteId === \"new\") return; // if the route is /note/new then don't make api request to backend\n    let response = await fetch(`/api/notes/${noteId}/`);\n    let data = await response.json();\n    setNote(data);\n  };\n\n  let createNote = async () => {\n    fetch(`/api/notes/create/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(note),\n    });\n  };\n\n  let updateNote = async () => {\n    fetch(`/api/notes/${noteId}/update/`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(note),\n    });\n  };\n\n  let deleteNote = async () => {\n    fetch(`/api/notes/${noteId}/delete/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    history(\"/\");\n  };\n\n  let handleSubmit = () => {\n    if (noteId !== \"new\" && note.body === \"\") {\n      deleteNote();\n    } else if (noteId !== \"new\") {\n      updateNote();\n    } else if (noteId === \"new\" && note.body !== null) {\n      createNote();\n    }\n    history(\"/\");\n  };\n  return (\n    <div className=\"note\">\n      <div className=\"note-header\">\n        <h3>\n          <ArrowLeft onClick={handleSubmit} />\n        </h3>\n        {noteId !== \"new\" ? (\n          <button onClick={deleteNote}>Delete</button>\n        ) : (\n          <button onClick={handleSubmit}>Done</button>\n        )}\n      </div>\n      <textarea\n        onChange={(e) => {\n          setNote({ ...note, body: e.target.value });\n        }}\n        value={note?.body}\n      ></textarea>\n    </div>\n  );\n};\n\nexport default NotePage;\n\n// could use {match} in react router v4 and v5\n\n//  import React from 'react';\n\n//  const NotePage = ({match}) => {\n//  let noteId = match.params.id\n//    return <div> Single Page {noteId}</div>;\n//  };\n\n//  export default NotePage;\n"]},"metadata":{},"sourceType":"module"}